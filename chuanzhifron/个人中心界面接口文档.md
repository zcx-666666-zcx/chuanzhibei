# 个人中心界面接口文档

## 1. 概述

本文档详细描述了个人中心界面所需的所有后端接口，供后端开发人员实现相应功能。

## 2. 接口列表

### 2.1 获取用户个人信息
#### 接口地址
```
GET /api/user/profile
```

#### 请求参数
无

#### 响应参数
```json
{
  "success": true,
  "message": "获取成功",
  "data": {
    "id": 1,
    "nickname": "非遗爱好者",
    "avatar": "https://example.com/user_avatar_1.jpg",
    "title": "非遗文化爱好者",
    "joinTime": "2024-01-15",
    "level": 3,
    "exp": 1280
  }
}
```

### 2.2 更新用户个人信息
#### 接口地址
```
PUT /api/user/profile
```

#### 请求参数
```json
{
  "nickname": "非遗小达人",
  "avatar": "https://example.com/uploaded_avatar.jpg",
  "title": "传统工艺学习者"
}
```

#### 响应参数
```json
{
  "success": true,
  "message": "更新成功",
  "data": {
    "id": 1,
    "nickname": "非遗小达人",
    "avatar": "https://example.com/uploaded_avatar.jpg",
    "title": "传统工艺学习者",
    "joinTime": "2024-01-15",
    "level": 3,
    "exp": 1280
  }
}
```

### 2.3 获取用户统计数据
#### 接口地址
```
GET /api/user/stats
```

#### 请求参数
无

#### 响应参数
```json
{
  "success": true,
  "message": "获取成功",
  "data": {
    "collections": 12,
    "creations": 5,
    "bookings": 3,
    "exp": 1280,
    "level": 3
  }
}
```

### 2.4 获取用户收藏列表
#### 接口地址
```
GET /api/user/collections
```

#### 请求参数
| 参数名 | 类型 | 必填 | 说明 |
| --- | --- | --- | --- |
| page | integer | 否 | 页码，默认为1 |
| size | integer | 否 | 每页条数，默认为10 |

#### 响应参数
```json
{
  "success": true,
  "message": "获取成功",
  "data": {
    "list": [
      {
        "id": 1,
        "heritageId": 101,
        "name": "昆曲",
        "level": "国家级非物质文化遗产",
        "description": "昆曲是中国最古老的戏曲声腔、剧种，被称为\"百戏之祖\"...",
        "image": "https://example.com/collection_1.jpg",
        "collectedTime": "2024-05-20 10:30:00"
      },
      {
        "id": 2,
        "heritageId": 102,
        "name": "苏绣",
        "level": "国家级非物质文化遗产",
        "description": "苏绣是中国传统刺绣工艺之一，以精细、雅致著称...",
        "image": "https://example.com/collection_2.jpg",
        "collectedTime": "2024-05-18 14:20:00"
      }
    ],
    "total": 12,
    "page": 1,
    "size": 10,
    "hasNext": false
  }
}
```

### 2.5 取消收藏
#### 接口地址
```
DELETE /api/user/collections/{id}
```

#### 请求参数
路径参数：
- id: 收藏项ID

#### 响应参数
```json
{
  "success": true,
  "message": "取消收藏成功"
}
```

### 2.6 获取用户创作列表
#### 接口地址
```
GET /api/user/creations
```

#### 请求参数
| 参数名 | 类型 | 必填 | 说明 |
| --- | --- | --- | --- |
| page | integer | 否 | 页码，默认为1 |
| size | integer | 否 | 每页条数，默认为10 |

#### 响应参数
```json
{
  "success": true,
  "message": "获取成功",
  "data": {
    "list": [
      {
        "id": 1,
        "title": "我的剪纸作品",
        "description": "以传统剪纸技法创作的龙凤呈祥图案",
        "image": "https://example.com/creation_1.jpg",
        "createTime": "2024-05-22 16:30:00",
        "likes": 25
      },
      {
        "id": 2,
        "title": "非遗展览随拍",
        "description": "参观非遗展览时拍摄的精彩瞬间",
        "image": "https://example.com/creation_2.jpg",
        "createTime": "2024-05-20 14:15:00",
        "likes": 18
      }
    ],
    "total": 5,
    "page": 1,
    "size": 10,
    "hasNext": false
  }
}
```

### 2.7 上传用户创作
#### 接口地址
```
POST /api/user/creations
```

#### 请求参数
```json
{
  "title": "我的苏绣作品",
  "description": "学习苏绣一个月的成果展示",
  "image": "https://example.com/uploaded_creation.jpg"
}
```

#### 响应参数
```json
{
  "success": true,
  "message": "上传成功"
}
```

### 2.8 删除用户创作
#### 接口地址
```
DELETE /api/user/creations/{id}
```

#### 请求参数
路径参数：
- id: 创作作品ID

#### 响应参数
```json
{
  "success": true,
  "message": "删除成功"
}
```

### 2.9 获取用户预约列表
#### 接口地址
```
GET /api/user/bookings
```

#### 请求参数
| 参数名 | 类型 | 必填 | 说明 |
| --- | --- | --- | --- |
| status | string | 否 | 预约状态(all/confirmed/cancelled/completed) |
| page | integer | 否 | 页码，默认为1 |
| size | integer | 否 | 每页条数，默认为10 |

#### 响应参数
```json
{
  "success": true,
  "message": "获取成功",
  "data": {
    "list": [
      {
        "id": 1,
        "inheritorId": 101,
        "masterName": "张明远",
        "skill": "剪纸体验",
        "masterAvatar": "https://example.com/master_1.jpg",
        "time": "2024-06-20 14:00-16:00",
        "status": "confirmed",
        "statusText": "已预约"
      },
      {
        "id": 2,
        "inheritorId": 102,
        "masterName": "李秀英",
        "skill": "苏绣体验",
        "masterAvatar": "https://example.com/master_2.jpg",
        "time": "2024-06-25 10:00-12:00",
        "status": "completed",
        "statusText": "已完成"
      }
    ],
    "total": 3,
    "page": 1,
    "size": 10,
    "hasNext": false
  }
}
```

### 2.10 取消预约
#### 接口地址
```
PUT /api/user/bookings/{id}/cancel
```

#### 请求参数
路径参数：
- id: 预约ID

#### 响应参数
```json
{
  "success": true,
  "message": "取消预约成功"
}
```

### 2.11 获取用户成就信息
#### 接口地址
```
GET /api/user/achievements
```

#### 请求参数
无

#### 响应参数
```json
{
  "success": true,
  "message": "获取成功",
  "data": {
    "level": 3,
    "exp": 1280,
    "nextLevelExp": 2000,
    "badges": [
      {
        "id": 1,
        "name": "收藏达人",
        "description": "收藏超过10个非遗项目",
        "icon": "https://example.com/badge_collection.png",
        "achieved": true
      },
      {
        "id": 2,
        "name": "创作新秀",
        "description": "上传超过3个创作作品",
        "icon": "https://example.com/badge_creation.png",
        "achieved": true
      }
    ]
  }
}
```

### 2.12 获取设置信息
#### 接口地址
```
GET /api/user/settings
```

#### 请求参数
无

#### 响应参数
```json
{
  "success": true,
  "message": "获取成功",
  "data": {
    "notifications": {
      "message": true,
      "activity": true,
      "news": false
    },
    "privacy": {
      "profileVisible": true,
      "creationsVisible": true
    }
  }
}
```

### 2.13 更新设置信息
#### 接口地址
```
PUT /api/user/settings
```

#### 请求参数
```json
{
  "notifications": {
    "message": true,
    "activity": false,
    "news": true
  },
  "privacy": {
    "profileVisible": false,
    "creationsVisible": true
  }
}
```

#### 响应参数
```json
{
  "success": true,
  "message": "设置更新成功"
}
```

## 3. 图片资源说明

### 3.1 用户头像
- 尺寸建议：200px * 200px (正方形)
- 格式：jpg/png
- 文件大小：建议不超过50KB
- 内容：用户上传的头像

### 3.2 收藏项目图片
- 尺寸建议：600px * 450px (宽高比 4:3)
- 格式：jpg/png
- 文件大小：建议不超过150KB
- 内容：非遗项目代表性图片

### 3.3 创作作品图片
- 尺寸建议：600px * 600px (正方形)
- 格式：jpg/png
- 文件大小：建议不超过200KB
- 内容：用户上传的创作作品

### 3.4 传承人头像
- 尺寸建议：120px * 120px (正方形)
- 格式：jpg/png
- 文件大小：建议不超过30KB
- 内容：传承人真实照片或肖像

### 3.5 成就徽章图标
- 尺寸建议：80px * 80px (正方形)
- 格式：png (支持透明背景)
- 文件大小：建议不超过20KB
- 内容：成就徽章图标

## 4. 错误响应格式

所有接口在发生错误时均返回以下格式：
```json
{
  "success": false,
  "error": "错误信息"
}
```

## 5. 权限要求

所有接口均需要用户认证，在请求头中添加：
```
Authorization: Bearer <token>
```

## 6. 分页参数说明

对于支持分页的接口，分页参数遵循以下规范：
- page: 页码，从1开始计数
- size: 每页条数，建议范围10-50
- 返回数据中包含total(总条数)、hasNext(是否有下一页)等分页信息

## 7. 数据安全要求

1. 用户个人信息属于敏感信息，必须严格保密
2. 图片资源需要防盗链处理
3. 所有接口通信必须通过HTTPS加密传输
4. 敏感操作（如删除、取消预约等）需要二次确认