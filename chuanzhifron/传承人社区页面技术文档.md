# 传承人社区页面技术文档

## 1. 概述

本文档详细描述了非遗传承小程序传承人社区页面的功能需求、UI设计建议以及技术实现要点，供前端开发人员参考。

## 2. 页面结构

传承人社区页面包含以下几个主要功能区域：
1. 顶部导航栏
2. 传承人展示区
3. 技艺视频区
4. 活动信息区
5. 社区动态区

## 3. 功能详细说明

### 3.1 顶部导航栏
- 包含标题"传承人社区"
- 支持返回上级页面

### 3.2 传承人展示区
- 横向滑动展示传承人列表
- 每位传承人包含：
  - 头像
  - 姓名
  - 擅长技艺
  - 荣誉称号
- 支持点击查看详情和预约体验

### 3.3 技艺视频区
- 展示传承人技艺教学视频
- 每个视频包含：
  - 视频缩略图
  - 视频标题
  - 简短描述
  - 播放时长
  - 发布日期
  - 播放量
- 支持点击观看视频

### 3.4 活动信息区
- 展示非遗相关活动信息
- 每个活动包含：
  - 活动标题
  - 活动时间
  - 活动地点
  - 参与按钮
- 支持报名参加或预约观看

### 3.5 社区动态区
- 展示社区用户发布的动态
- 每条动态包含：
  - 用户头像
  - 用户名
  - 发布时间
  - 动态内容
  - 图片附件
  - 点赞数和评论数
  - 点赞按钮
- 支持点赞和评论操作

## 4. UI设计建议

### 4.1 整体风格
- 主色调：中国传统红色(#C41E3A)和米白色(#F8F5F2)
- 辅助色：深灰色(#333333)和浅灰色(#CCCCCC)
- 字体：默认使用系统字体

### 4.2 布局规范
- 页面边距：左右各15px
- 元素间距：模块间间距20px，元素内间距10px
- 圆角：普遍使用8px圆角

### 4.3 组件样式

#### 4.3.1 传承人卡片
- 宽度：150px
- 头像尺寸：80px * 80px
- 圆形头像
- 文字居中排列

#### 4.3.2 视频卡片
- 宽度：100%
- 缩略图高度：180px
- 半透明播放按钮覆盖在缩略图中央
- 底部信息区域：垂直排列文本

#### 4.3.3 活动卡片
- 宽度：100%
- 左侧日期标签：60px * 60px
- 右侧信息区域：包含标题、时间、地点
- 底部按钮：固定高度

#### 4.3.4 动态卡片
- 宽度：100%
- 头像尺寸：40px * 40px
- 图片附件：网格布局展示
- 底部操作区域：点赞和评论按钮

## 5. 接口调用说明

### 5.1 页面加载流程
1. 页面onLoad时并行请求以下接口：
   - 获取传承人列表(/api/inheritor/list)
   - 获取技艺视频列表(/api/video/list)
   - 获取活动信息列表(/api/activity/list)
   - 获取社区动态列表(/api/community/posts)

### 5.2 下拉刷新
- 重新请求所有接口数据
- 更新页面显示

## 6. 图片资源规划

### 6.1 传承人头像
- 文件命名建议：master_{ID}.jpg
- 尺寸建议：200px * 200px (正方形)
- 格式：jpg/png
- 文件大小：建议不超过50KB

### 6.2 视频缩略图
- 文件命名建议：video_thumb_{ID}.jpg
- 尺寸建议：600px * 400px (宽高比 3:2)
- 格式：jpg/png
- 文件大小：建议不超过150KB

### 6.3 用户头像
- 文件命名建议：user_avatar_{ID}.jpg
- 尺寸建议：100px * 100px (正方形)
- 格式：jpg/png
- 文件大小：建议不超过30KB

## 7. 性能优化建议

### 7.1 图片懒加载
- 非首屏图片使用懒加载技术
- 优先加载可视区域内的图片

### 7.2 数据缓存
- 传承人列表等不经常变动的数据可适当缓存
- 缓存时间建议不超过30分钟

### 7.3 骨架屏
- 在数据加载过程中显示骨架屏占位符
- 提升用户体验

## 8. 异常处理

### 8.1 网络异常
- 显示网络异常提示
- 提供重试按钮

### 8.2 数据为空
- 当某个模块数据为空时，显示友好的空状态提示

### 8.3 接口错误
- 记录错误日志
- 给用户友好的错误提示

## 9. 技术性修改建议

### 9.1 当前存在的问题分析
1. 当前页面仅实现了基本的数据展示和简单交互功能，缺乏丰富的社区互动体验
2. 数据加载策略较为简单，没有实现分页加载
3. 缺少用户发布动态功能
4. 没有点赞和评论状态的持久化存储
5. 缺乏个性化推荐功能

### 9.2 主流社区类小程序设计趋势
根据当前主流社区类小程序的设计模式，传承人社区页面应当具备以下特征：
1. **个性化推荐**：基于用户兴趣和行为数据进行智能推荐
2. **社交化功能**：支持用户发布动态、点赞、评论、分享
3. **多媒体展示**：结合图片、视频等多媒体内容
4. **实时互动**：支持即时通讯和实时通知
5. **成就系统**：通过积分、等级等方式激励用户参与

### 9.3 具体技术实现建议

#### 9.3.1 组件化架构重构
将传承人社区页面拆分为多个可复用组件：
- 传承人卡片组件(inheritor-card)
- 视频列表组件(video-list)
- 活动卡片组件(activity-card)
- 动态卡片组件(post-card)
- 社区发布组件(post-publish)
- 骨架屏组件(skeleton-screen)

优势：
- 提高代码可维护性和可复用性
- 便于团队协作开发
- 符合现代前端开发的最佳实践

#### 9.3.2 数据请求优化策略
1. **并行请求**：使用Promise.all()并发请求多个接口
2. **分页加载**：采用分页方式加载社区动态，减轻服务器压力
3. **数据缓存机制**：对不经常变化的数据实施本地缓存策略
4. **错误降级处理**：单个接口失败不影响整体页面渲染

#### 9.3.3 用户体验优化措施
1. **骨架屏加载**：在数据加载过程中显示占位符，减少用户等待焦虑
2. **下拉刷新**：提供标准的手势刷新机制
3. **上拉加载**：实现社区动态的无限滚动加载
4. **空状态处理**：优雅地处理数据为空的情况
5. **操作反馈**：提供清晰的用户操作反馈

#### 9.3.4 性能优化方案
1. **图片懒加载**：非首屏图片延迟加载，减少初始请求压力
2. **虚拟列表**：对于长列表数据采用虚拟渲染技术
3. **事件防抖节流**：优化高频触发事件的处理
4. **内存泄漏防护**：及时清理定时器、监听器等资源

### 9.4 为什么这样修改能满足比赛评委的要求

#### 9.4.1 技术先进性体现
1. **现代化前端架构**：组件化设计思想体现了良好的工程实践
2. **性能优化意识**：多种优化策略展示了对用户体验的关注
3. **标准化交互设计**：遵循小程序平台的设计规范

#### 9.4.2 创新性亮点
1. **非遗文化社区**：将传统文化与现代社区模式相结合
2. **多媒体内容聚合**：整合传承人、视频、活动、动态等多种内容形式
3. **个性化推荐**：基于用户行为数据进行智能推荐

#### 9.4.3 工程化考量
1. **可扩展性设计**：模块化结构便于后续功能迭代
2. **可维护性保障**：清晰的代码结构有利于长期维护
3. **团队协作友好**：组件化架构支持多人协同开发