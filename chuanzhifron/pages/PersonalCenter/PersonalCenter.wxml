<!--PersonalCenter.wxml-->
<view class="container">
  <!-- ç”¨æˆ·ä¿¡æ¯å¡ç‰‡ -->
  <view class="user-card">
    <view class="user-header">
      <image src="{{userInfo.avatar}}" class="user-avatar" mode="aspectFill"></image>
      <view class="user-info">
        <text class="user-name">{{userInfo.name}}</text>
        <text class="user-title">{{userInfo.title}}</text>
      </view>
      <button class="settings-btn" bindtap="onSettings">
        <text class="iconfont icon-settings">âš™ï¸</text>
      </button>
    </view>
    
    <view class="user-stats">
      <view class="stat-item">
        <text class="stat-number">{{userStats.collections}}</text>
        <text class="stat-label">æˆ‘çš„æ”¶è—</text>
      </view>
      <view class="stat-item">
        <text class="stat-number">{{userStats.creations}}</text>
        <text class="stat-label">æˆ‘çš„åˆ›ä½œ</text>
      </view>
      <view class="stat-item">
        <text class="stat-number">{{userStats.bookings}}</text>
        <text class="stat-label">é¢„çº¦ä½“éªŒ</text>
      </view>
    </view>
  </view>

  <!-- æˆ‘çš„æ”¶è— -->
  <view class="section">
    <view class="section-header">
      <text class="section-title">æˆ‘çš„æ”¶è—</text>
      <text class="more-link" bindtap="viewAllCollections">æŸ¥çœ‹å…¨éƒ¨</text>
    </view>
    <view class="collection-list">
      <view class="collection-item" wx:for="{{collections}}" wx:key="id" bindtap="onCollectionTap" data-item="{{item}}">
        <image src="{{item.image || item.imageUrl}}" class="collection-image" mode="aspectFill"></image>
        <view class="collection-content">
          <text class="collection-title">{{item.name || item.heritageName}}</text>
          <text class="collection-level">{{item.level || item.heritageLevel}}</text>
          <text class="collection-desc">{{item.description || item.heritageDescription}}</text>
        </view>
        <button class="remove-btn" bindtap="removeCollection" data-item="{{item}}" catchtap="true">
          <text class="iconfont icon-close">âœ•</text>
        </button>
      </view>
    </view>
  </view>

  <!-- æˆ‘çš„åˆ›ä½œ -->
  <view class="section">
    <view class="section-header">
      <text class="section-title">æˆ‘çš„åˆ›ä½œ</text>
      <text class="more-link" bindtap="viewAllCreations">æŸ¥çœ‹å…¨éƒ¨</text>
    </view>
    <view class="creation-grid">
      <view class="creation-item" wx:for="{{creations}}" wx:key="id" bindtap="onCreationTap" data-item="{{item}}">
        <image src="{{item.image}}" class="creation-image" mode="aspectFill"></image>
        <view class="creation-overlay">
          <text class="creation-title">{{item.title}}</text>
        </view>
      </view>
      <view class="add-creation" bindtap="addCreation">
        <text class="add-icon">+</text>
        <text class="add-text">æ·»åŠ åˆ›ä½œ</text>
      </view>
    </view>
  </view>

  <!-- é¢„çº¦ä½“éªŒ -->
  <view class="section">
    <view class="section-header">
      <text class="section-title">é¢„çº¦ä½“éªŒ</text>
      <text class="more-link" bindtap="viewAllBookings">æŸ¥çœ‹å…¨éƒ¨</text>
    </view>
    <view class="booking-list">
      <view class="booking-item" wx:for="{{bookings}}" wx:key="id">
        <image src="{{item.masterAvatar}}" class="master-avatar" mode="aspectFill"></image>
        <view class="booking-content">
          <text class="booking-title">{{item.masterName}} - {{item.skill}}</text>
          <text class="booking-time">{{item.time}}</text>
          <text class="booking-status {{item.status}}">{{item.statusText}}</text>
        </view>
        <button wx:if="{{item.status === 'pending'}}" class="btn-secondary cancel-btn" bindtap="cancelBooking" data-item="{{item}}">
          å–æ¶ˆé¢„çº¦
        </button>
      </view>
    </view>
  </view>

  <!-- åŠŸèƒ½èœå• -->
  <view class="menu-section">
    <view class="menu-item" bindtap="onMenuTap" data-type="profile">
      <text class="menu-icon">ğŸ‘¤</text>
      <text class="menu-text">ä¸ªäººèµ„æ–™</text>
      <text class="menu-arrow">></text>
    </view>
    <view class="menu-item" bindtap="onMenuTap" data-type="settings">
      <text class="menu-icon">âš™ï¸</text>
      <text class="menu-text">è®¾ç½®</text>
      <text class="menu-arrow">></text>
    </view>
    <view class="menu-item" bindtap="onMenuTap" data-type="help">
      <text class="menu-icon">â“</text>
      <text class="menu-text">å¸®åŠ©ä¸åé¦ˆ</text>
      <text class="menu-arrow">></text>
    </view>
    <view class="menu-item" bindtap="onMenuTap" data-type="about">
      <text class="menu-icon">â„¹ï¸</text>
      <text class="menu-text">å…³äºæˆ‘ä»¬</text>
      <text class="menu-arrow">></text>
    </view>
  </view>
</view>
