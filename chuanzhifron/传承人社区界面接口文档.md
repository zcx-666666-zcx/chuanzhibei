# 传承人社区界面接口文档

## 1. 概述

本文档详细描述了传承人社区界面所需的所有后端接口，供后端开发人员实现相应功能。

## 2. 接口列表

### 2.1 获取传承人列表
#### 接口地址
```
GET /api/inheritor/list
```

#### 请求参数
| 参数名 | 类型 | 必填 | 说明 |
| --- | --- | --- | --- |
| category | string | 否 | 分类筛选条件 |
| keyword | string | 否 | 搜索关键词 |
| page | integer | 否 | 页码，默认为1 |
| size | integer | 否 | 每页条数，默认为10 |

#### 响应参数
```json
{
  "success": true,
  "message": "获取成功",
  "data": {
    "list": [
      {
        "id": 1,
        "name": "张同禄",
        "skill": "景泰蓝制作技艺",
        "avatar": "https://example.com/master_1.jpg",
        "title": "中国工艺美术大师",
        "introduction": "景泰蓝制作技艺国家级传承人，从业50余年..."
      },
      {
        "id": 2,
        "name": "姚建萍",
        "skill": "苏绣",
        "avatar": "https://example.com/master_2.jpg",
        "title": "江苏省工艺美术大师",
        "introduction": "苏绣技艺传承人，创新了多种刺绣技法..."
      }
    ],
    "total": 100,
    "page": 1,
    "size": 10,
    "hasNext": true
  }
}
```

### 2.2 获取传承人详情
#### 接口地址
```
GET /api/inheritor/detail/{id}
```

#### 请求参数
路径参数：
- id: 传承人ID

#### 响应参数
```json
{
  "success": true,
  "message": "获取成功",
  "data": {
    "id": 1,
    "name": "张同禄",
    "skill": "景泰蓝制作技艺",
    "avatar": "https://example.com/master_1.jpg",
    "title": "中国工艺美术大师",
    "introduction": "景泰蓝制作技艺国家级传承人，从业50余年...",
    "detail": "张同禄先生出生于1942年，是国家级非物质文化遗产项目景泰蓝制作技艺的代表性传承人...",
    "works": [
      {
        "id": 1,
        "name": "繁华盛世",
        "imageUrl": "https://example.com/work_1.jpg",
        "year": "2010"
      },
      {
        "id": 2,
        "name": "吉祥如意",
        "imageUrl": "https://example.com/work_2.jpg",
        "year": "2015"
      }
    ],
    "videos": [
      {
        "id": 1,
        "title": "景泰蓝制作工艺全程演示",
        "thumbnail": "https://example.com/video_thumb_1.jpg",
        "duration": "25:30",
        "views": 128000
      }
    ]
  }
}
```

### 2.3 预约传承人体验
#### 接口地址
```
POST /api/inheritor/book
```

#### 请求参数
```json
{
  "inheritorId": 1,
  "appointmentTime": "2024-06-20 14:00:00",
  "contactInfo": "13800138000"
}
```

#### 响应参数
```json
{
  "success": true,
  "message": "预约成功，请等待传承人确认"
}
```

### 2.4 获取技艺视频列表
#### 接口地址
```
GET /api/video/list
```

#### 请求参数
| 参数名 | 类型 | 必填 | 说明 |
| --- | --- | --- | --- |
| category | string | 否 | 分类筛选条件 |
| keyword | string | 否 | 搜索关键词 |
| page | integer | 否 | 页码，默认为1 |
| size | integer | 否 | 每页条数，默认为10 |

#### 响应参数
```json
{
  "success": true,
  "message": "获取成功",
  "data": {
    "list": [
      {
        "id": 1,
        "title": "苏绣技艺展示",
        "description": "国家级传承人展示苏绣的精湛技艺和独特魅力",
        "thumbnail": "https://example.com/video_thumb_1.jpg",
        "duration": "15:30",
        "date": "2024-05-15",
        "views": 32000,
        "inheritor": {
          "id": 1,
          "name": "姚建萍",
          "skill": "苏绣"
        }
      },
      {
        "id": 2,
        "title": "书法创作演示",
        "description": "著名书法家现场演示书法创作过程和技巧",
        "thumbnail": "https://example.com/video_thumb_2.jpg",
        "duration": "12:45",
        "date": "2024-05-10",
        "views": 28000,
        "inheritor": {
          "id": 2,
          "name": "王羲之",
          "skill": "书法"
        }
      }
    ],
    "total": 100,
    "page": 1,
    "size": 10,
    "hasNext": true
  }
}
```

### 2.5 获取视频详情
#### 接口地址
```
GET /api/video/detail/{id}
```

#### 请求参数
路径参数：
- id: 视频ID

#### 响应参数
```json
{
  "success": true,
  "message": "获取成功",
  "data": {
    "id": 1,
    "title": "苏绣技艺展示",
    "description": "国家级传承人展示苏绣的精湛技艺和独特魅力",
    "videoUrl": "https://example.com/videos/video_1.mp4",
    "thumbnail": "https://example.com/video_thumb_1.jpg",
    "duration": "15:30",
    "date": "2024-05-15",
    "views": 32000,
    "likes": 1200,
    "inheritor": {
      "id": 1,
      "name": "姚建萍",
      "skill": "苏绣",
      "avatar": "https://example.com/master_2.jpg"
    },
    "relatedVideos": [
      {
        "id": 2,
        "title": "苏绣针法详解",
        "thumbnail": "https://example.com/video_thumb_2.jpg",
        "duration": "18:20"
      }
    ]
  }
}
```

### 2.6 获取活动列表
#### 接口地址
```
GET /api/activity/list
```

#### 请求参数
| 参数名 | 类型 | 必填 | 说明 |
| --- | --- | --- | --- |
| status | string | 否 | 活动状态(即将开始/进行中/已结束) |
| page | integer | 否 | 页码，默认为1 |
| size | integer | 否 | 每页条数，默认为10 |

#### 响应参数
```json
{
  "success": true,
  "message": "获取成功",
  "data": {
    "list": [
      {
        "id": 1,
        "title": "非遗技艺体验日",
        "time": "2024-06-15 10:00-16:00",
        "location": "北京市东城区非遗展示中心",
        "day": "15",
        "month": "六月",
        "description": "邀请多位非遗传承人现场展示技艺，观众可近距离观摩并参与体验...",
        "participants": 45,
        "capacity": 50,
        "buttonText": "报名参加"
      },
      {
        "id": 2,
        "title": "传承人讲座系列",
        "time": "2024-06-18 14:00-16:00",
        "location": "线上直播",
        "day": "18",
        "month": "六月",
        "description": "邀请国家级传承人分享非遗保护与传承的经验和心得...",
        "participants": 1200,
        "capacity": 0,
        "buttonText": "预约观看"
      }
    ],
    "total": 20,
    "page": 1,
    "size": 10,
    "hasNext": false
  }
}
```

### 2.7 参加活动
#### 接口地址
```
POST /api/activity/join
```

#### 请求参数
```json
{
  "activityId": 1
}
```

#### 响应参数
```json
{
  "success": true,
  "message": "报名成功"
}
```

### 2.8 获取社区动态列表
#### 接口地址
```
GET /api/community/posts
```

#### 请求参数
| 参数名 | 类型 | 必填 | 说明 |
| --- | --- | --- | --- |
| page | integer | 否 | 页码，默认为1 |
| size | integer | 否 | 每页条数，默认为10 |

#### 响应参数
```json
{
  "success": true,
  "message": "获取成功",
  "data": {
    "list": [
      {
        "id": 1,
        "userName": "剪纸达人",
        "avatar": "https://example.com/user_avatar_1.jpg",
        "time": "2小时前",
        "content": "今天完成了新的剪纸作品《龙凤呈祥》，融合了传统纹样和现代设计元素，希望大家喜欢！",
        "images": ["https://example.com/post_image_1.jpg"],
        "likes": 128,
        "comments": 23,
        "isLiked": false
      },
      {
        "id": 2,
        "userName": "陶瓷工艺师",
        "avatar": "https://example.com/user_avatar_2.jpg",
        "time": "5小时前",
        "content": "分享一个青花瓷的制作过程，从选料到烧制，每一步都凝聚着匠人的心血。",
        "images": [
          "https://example.com/post_image_2.jpg",
          "https://example.com/post_image_3.jpg"
        ],
        "likes": 256,
        "comments": 45,
        "isLiked": true
      }
    ],
    "total": 128,
    "page": 1,
    "size": 10,
    "hasNext": true
  }
}
```

### 2.9 发布社区动态
#### 接口地址
```
POST /api/community/posts
```

#### 请求参数
```json
{
  "content": "今天学习了景泰蓝制作技艺，收获满满！",
  "images": [
    "https://example.com/uploaded_image_1.jpg"
  ]
}
```

#### 响应参数
```json
{
  "success": true,
  "message": "发布成功"
}
```

### 2.10 点赞动态
#### 接口地址
```
POST /api/community/posts/{id}/like
```

#### 请求参数
路径参数：
- id: 动态ID

#### 响应参数
```json
{
  "success": true,
  "message": "点赞成功"
}
```

### 2.11 取消点赞动态
#### 接口地址
```
DELETE /api/community/posts/{id}/like
```

#### 请求参数
路径参数：
- id: 动态ID

#### 响应参数
```json
{
  "success": true,
  "message": "取消点赞成功"
}
```

## 3. 图片资源说明

### 3.1 传承人头像
- 尺寸建议：400px * 400px (正方形)
- 格式：jpg/png
- 文件大小：建议不超过100KB
- 内容：传承人真实照片或肖像

### 3.2 视频缩略图
- 尺寸建议：800px * 600px (宽高比 4:3)
- 格式：jpg/png
- 文件大小：建议不超过200KB
- 内容：视频关键帧截图或概念图

### 3.3 用户头像
- 尺寸建议：200px * 200px (正方形)
- 格式：jpg/png
- 文件大小：建议不超过50KB
- 内容：用户上传的头像

### 3.4 动态图片
- 尺寸建议：800px * 600px (宽高比 4:3)
- 格式：jpg/png
- 文件大小：建议不超过300KB
- 内容：用户上传的图片

## 4. 错误响应格式

所有接口在发生错误时均返回以下格式：
```json
{
  "success": false,
  "error": "错误信息"
}
```

## 5. 权限要求

除获取列表类接口外，其他接口均需要用户认证，在请求头中添加：
```
Authorization: Bearer <token>
```

## 6. 分页参数说明

对于支持分页的接口，分页参数遵循以下规范：
- page: 页码，从1开始计数
- size: 每页条数，建议范围10-50
- 返回数据中包含total(总条数)、hasNext(是否有下一页)等分页信息

## 7. 数据安全要求

1. 用户个人信息和社区动态属于敏感信息，必须严格保密
2. 图片资源需要防盗链处理
3. 所有接口通信必须通过HTTPS加密传输
4. 敏感操作（如预约、报名等）需要短信验证码二次验证